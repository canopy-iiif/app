@use "../settings/breakpoints" as bp;

.canopy-layout {
  --canopy-layout-sidebar-width: 13rem;
  --canopy-layout-content-nav-width: 13rem;
  --canopy-layout-row-gap: 2.618rem;
  --canopy-layout-column-gap: 2.618rem;
  display: grid;
  width: 100%;
  padding: clamp(1rem, 2vw, 2.5rem);
  row-gap: var(--canopy-layout-row-gap);
  column-gap: var(--canopy-layout-column-gap);
  grid-template-columns: minmax(0, 1fr);
  align-items: start;
}

.canopy-layout--fixed {
  margin-left: auto;
  margin-right: auto;
  max-width: 1280px;
}

.canopy-layout--fluid {
  max-width: none;
}

.canopy-layout__content {
  min-width: 0;
}

.canopy-layout__sidebar,
.canopy-layout__content-nav {
  position: relative;
}

.canopy-layout__sidebar {
  display: none;
}

.canopy-layout__content-nav {
  display: none;
  flex-direction: column;
  gap: 0.75rem;
  align-items: stretch;
}

.canopy-layout--content-nav-collapsed {
  --canopy-layout-content-nav-width: 0;
}

.canopy-layout__content-nav.is-collapsed {
  align-items: flex-end;
  width: 0;
  padding: 0;
  margin: 0;
  overflow: visible;
  margin-left: calc(-1 * var(--canopy-layout-column-gap));
}

@media (min-width: bp.$canopy-desktop-breakpoint) {
  .canopy-layout__sidebar {
    display: block;
  }

  .canopy-layout__content-nav {
    display: flex;
  }

  .canopy-layout--with-sidebar {
    grid-template-columns: var(--canopy-layout-sidebar-width) minmax(0, 1fr);
  }

  .canopy-layout--with-content-nav:not(.canopy-layout--with-sidebar) {
    grid-template-columns: minmax(0, 1fr) var(--canopy-layout-content-nav-width);
  }

  .canopy-layout--with-sidebar.canopy-layout--with-content-nav {
    grid-template-columns:
      var(--canopy-layout-sidebar-width)
      minmax(0, 1fr)
      var(--canopy-layout-content-nav-width);
  }
}
